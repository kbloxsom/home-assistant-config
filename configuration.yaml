---
homeassistant:
  name: Home
  latitude: !secret latitude
  longitude: !secret longitude
  elevation: !secret elevation
  currency: !secret currency
  time_zone: !secret time_zone
  external_url: !secret external_url
  internal_url: !secret internal_url
  customize: !include/ui/customize.yaml
  packages: !include_dir_named packages

default_config:

# Core UI
frontend: !include includes/ui/frontend.yaml

# Integrations
http: !include includes/integrations/http.yaml
influxdb: !include includes/integrations/influxdb.yaml
google_assistant: !include includes/integrations/google_assistant.yaml
ffmpeg: !include includes/integrations/ffmpeg.yaml
panel_custom: !include includes/integrations/panel_custom.yaml
recorder: !include includes/integrations/recorder.yaml
logger: !include includes/integrations/logger.yaml
media_source: !include includes/integrations/media_source.yaml
stream: !include includes/integrations/stream.yaml
system_log: !include includes/integrations/system_log.yaml
tts: !include includes/integrations/tts.yaml
sonoff: !include includes/integrations/sonoff.yaml

# Platforms
mqtt: !include includes/platforms/mqtt.yaml
sensor: !include_dir_merge_list sensor
binary_sensor: !include includes/platforms/binary_sensor.yaml
camera: !include includes/platforms/camera.yaml
notify: !include includes/platforms/notify.yaml
shell_command: !include includes/platforms/shell_command.yaml

# Domain helpers
utility_meter: !include_dir_merge_named configs
group: !include includes/helpers/group.yaml

# User logic
scene: !include scenes.yaml
script: !include scripts.yaml
automation: !include automations.yaml

# Feature-specific math
compensation: !include includes/platforms/compensation.yaml


# FFmpeg
ffmpeg:

# Binary Sensor
binary_sensor:
  - platform: sun2
    monitored_conditions:
      - elevation
      - elevation: 3
      - elevation:
          above: -6
          name: Above Civil Dawn

# Camera
camera:
  - platform: ffmpeg
    name: cam
    input: /dev/input/video1

# Frontend
frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /local/card-mod.js

# Google Assistant
google_assistant:
  project_id: home-assistant-d6a3c
  service_account: !include service_account.json
  report_state: true

# HTTP
http:
  use_x_forwarded_for: true
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem
  trusted_proxies: !secret trusted_proxies
  ip_ban_enabled: true
  login_attempts_threshold: 5

# InfluxDB
influxdb:
  host: a0d7b954-influxdb
  port: 8086
  database: homeassistant
  username: !secret username
  password: !secret influxdb_password
  max_retries: 3
  default_measurement: state

# Logger
logger:
  logs:
    homeassistant.components.shell_command: debug
    scripts.create_video: debug

# Media Source
media_source:
  media_dirs:
    llmvision: /config/media/llmvision
  allowlist_external_dirs:
    - /config/www
    - /config/media/llmvision
# MQTT
mqtt: !include mqtt.yaml

# Notify
notify:
  - name: "mail_has_arrived"
    platform: smtp
    sender: !secret email
    recipient:
      - !secret notifyKim
      - !secret notifyBarrie
    server: "smtp.comcast.net"
    port: 587
    timeout: 15
    username: !secret email
    password: !secret emailpassword
  - name: persistent_log
    platform: file
    filename: /config/persistent.log
  - name: smtp_sms
    platform: smtp
    server: smtp.comcast.net
    port: 587
    timeout: 15
    sender: homeassistant@yourdomain.com
    encryption: starttls
    username: !secret email
    password: !secret emailpassword
    recipient: !secret recipient
    sender_name: "Home Assistant"

# Panel Custom
panel_custom:
  - name: ha_system
    sidebar_title: System Info
    sidebar_icon: mdi:information-variant
    js_url: /api/hassio/app/entrypoint.js
    url_path: "hassio/system/info"
    embed_iframe: true
    require_admin: true
    config:
      ingress: core_configurator

# Recorder
recorder:

# Scene
scene: !include scenes.yaml

# Script
script: !include scripts.yaml

# Sensor
sensor: !include_dir_merge_list sensor/

# Shell Command
shell_command:
  create_video: python3 /config/scripts/create_video.py

# Sonoff
sonoff:
  username: !secret email
  password: !secret ewelink_password

# Stream
stream:
  ll_hls: true
  part_duration: 0.75
  segment_duration: 6

# System Log
system_log:
  fire_event: true

# Text-to-Speech
tts:
  - platform: google_translate
    cache: true
    cache_dir: /tmp/tts
    time_memory: 300
    service_name: google_say

# Utility Meter
utility_meter: !include_dir_merge_named configs/

# Group
group: !include groups.yaml

# Automation
automation: !include automations.yaml
